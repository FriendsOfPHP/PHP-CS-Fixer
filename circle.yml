machine:
  xcode:
    version: 8.2

checkout:
    pre:
        - system_profiler SPSoftwareDataType

dependencies:
    cache_directories:
        - ~/.composer
        - ~/Library/Caches/Homebrew
    pre:
        - brew tap homebrew/homebrew-php
        - brew install php71
        - curl -sS https://getcomposer.org/installer | php
    override:
        - php composer.phar install --no-interaction --no-progress --optimize-autoloader

test:
    override:
        - SKIP_LINT_TEST_CASES=1 vendor/bin/phpunit --verbose
        - php php-cs-fixer --diff --dry-run -v fix
